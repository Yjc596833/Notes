<!--
 * @Author: your name
 * @Date: 2020-11-10 15:11:26
 * @LastEditTime: 2020-11-18 21:49:25
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \Notes\EF\逆向工程(脚手架).md
-->

[逆向工程微软：](https://docs.microsoft.com/en-us/ef/core/managing-schemas/scaffolding?tabs=dotnet-core-cli)

[逆向工程MYSQL：](https://dev.mysql.com/doc/connector-net/en/connector-net-entityframework-core-scaffold-example.html)


####  使用程序包管理器控制台：

 1.使用 .NET Core 命令行界面（CLI）初始化有效的 .NET Core 项目，如果已存在项目，则cd到对应项目下即可，不需要创建

``` C#
    dotnet new console  -o sakilaConsole  
    cd sakilaConsole
```

2.使用CLI为EF Core添加Mysql Nuget软件包。
```
    dotnet add package MySql.Data.EntityFrameworkCore --version 8.0.20
    dotnet add package Microsoft.EntityFrameworkCore.Design
```

3.如果使用的是EF Core 2.0，则需要在文件中添加对的引用Microsoft.EntityFrameworkCore.Tools.DotNet作为DotNetCliToolReference条目到对于项目的 .csproj:

``` c#
    <ItemGroup>
    <DotNetCliToolReference Include="Microsoft.EntityFrameworkCore.Tools.DotNet" Version="2.0.3"/>
    </ItemGroup>

    tip:如果是.NET CORE更高版本，则删除对改软件包的引用
```

4.还原项目文件中指定的依赖项和特定于项目的工具
```
    dotnet restore
```

5.通过执行以下命令来创建Entity Framework Core模型(调整连接字符串值以匹配当前项目)

``` c#
 dotnet ef dbcontext scaffold "server=119.45.16.121;port=3306;user=normal;password=123456;database=test" MySql.Data.EntityFrameworkCore -o Entities -f --use-database-names --data-annotations  --context H5Context

  dotnet ef dbcontext scaffold "server=localhost;port=3306;user=root;password=123456;database=yejiancongtest" MySql.Data.EntityFrameworkCore -o Database -f --use-database-names --data-annotations  --context H5Context

 相关参数：
 添加数据注释：--data-annotations
 使用原生数据结构：--use-database-names 
 自定义context名称：--context H5Context
```